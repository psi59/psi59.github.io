<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Docker DNS 문제 해결하기 | Realsangil</title>
<meta name=keywords content="docker,dns">
<meta name=description content="Docker DNS 문제 해결하기 - Realsangil">
<meta name=author content="박상일">
<link rel=canonical href=https://blog.realsangil.net/posts/2018-04-15-docker-dns-problem/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.realsangil.net/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://blog.realsangil.net/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://blog.realsangil.net/favicon-32x32.png>
<link rel=apple-touch-icon href=https://blog.realsangil.net/apple-touch-icon.png>
<link rel=mask-icon href=https://blog.realsangil.net/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.91.2">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MMTYEB98J6"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-MMTYEB98J6',{anonymize_ip:!1})}</script>
<meta property="og:title" content="Docker DNS 문제 해결하기">
<meta property="og:description" content>
<meta property="og:type" content="article">
<meta property="og:url" content="https://blog.realsangil.net/posts/2018-04-15-docker-dns-problem/">
<meta property="og:image" content="https://blog.realsangil.net/posts/2018-04-15-docker-dns-problem/images/covers/docker.png"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2018-04-15T06:15:00+09:00">
<meta property="article:modified_time" content="2018-04-15T06:15:00+09:00">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://blog.realsangil.net/posts/2018-04-15-docker-dns-problem/images/covers/docker.png">
<meta name=twitter:title content="Docker DNS 문제 해결하기">
<meta name=twitter:description content>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://blog.realsangil.net/posts/"},{"@type":"ListItem","position":3,"name":"Docker DNS 문제 해결하기","item":"https://blog.realsangil.net/posts/2018-04-15-docker-dns-problem/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Docker DNS 문제 해결하기","name":"Docker DNS 문제 해결하기","description":"","keywords":["docker","dns"],"articleBody":"이번 포스트는 제가 우분투 이미지를 사용해 개발 환경을 만들다 발생한 에러에 대해 얘기해보려 합니다.\nError Log Could not resolve 'archive.ubuntu.com' dns에서 archive.ubuntu.com을 찾지 못했을 때 발생하는 에러이며 CentOS라던지 다른 리눅스의 패키지 매니저를 사용할 때 저 에러와 비슷한 에러를 보셨을 때 해결할 수 있는 방법을 얘기해보려 합니다.\n왜 이런 문제가 발생하는가? 이 에러는 /etc/resolve.conf에 정의된 DNS 서버를 찾지 못했을 때 발생하는 에러입니다.\n어떻게 해결하는가? 해결법 1. docker container를 실행할 때 파라메터 추가 이 방법은 해당 컨테이너에 한해서만 dns 설정을 변경하고 싶을 때 사용할 수 있는 방법입니다.\ndocker run ... --dns 8.8.8.8 해결법 2. docker 설정 변경 이 방법은 docker의 모든 컨테이너에 영향을 주는 설정이므로 신중히 생각해보시고 적용하셔야 합니다.\n# /etc/default/docker 파일에 아래 내용 삽입 DOCKER_OPTS=\"--dns 8.8.8.8 --dns 8.8.4.4\" 수정 후에는 반드시 docker service를 재시작 해주셔야 적용 됩니다.\nservice docker restart 마치며.. 대부분의 서비스에서는 8.8.8.8(google dns)로 설정해 에러를 해결합니다만 최근에 cloudflare가 1.1.1.1의 주소로 국내에 dns서버를 오픈했습니다. 때문에 싱가포르에 서버를 두고 있는 google dns보다 30ms정도 더 빠르다고 합니다. 참고하시어 설정하시면 좋을거 같습니다.\n","wordCount":"159","inLanguage":"en","image":"https://blog.realsangil.net/posts/2018-04-15-docker-dns-problem/images/covers/docker.png","datePublished":"2018-04-15T06:15:00+09:00","dateModified":"2018-04-15T06:15:00+09:00","author":{"@type":"Person","name":"박상일"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.realsangil.net/posts/2018-04-15-docker-dns-problem/"},"publisher":{"@type":"Organization","name":"Realsangil","logo":{"@type":"ImageObject","url":"https://blog.realsangil.net/favicon.ico"}}}</script>
</head>
<body id=top>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://blog.realsangil.net accesskey=h title="Realsangil (Alt + H)">Realsangil</a>
<span class=logo-switches>
</span>
</div>
<ul id=menu>
<li>
<a href=https://blog.realsangil.net/posts/ title=posts>
<span>posts</span>
</a>
</li>
<li>
<a href=https://blog.realsangil.net/tags/ title=tags>
<span>tags</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://blog.realsangil.net>Home</a>&nbsp;»&nbsp;<a href=https://blog.realsangil.net/posts/>Posts</a></div>
<h1 class=post-title>
Docker DNS 문제 해결하기
</h1>
<div class=post-meta><span title="2018-04-15 06:15:00 +0900 +0900">April 15, 2018</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;박상일
</div>
</header>
<figure class=entry-cover><img loading=lazy src=https://blog.realsangil.net/images/covers/docker.png alt="출처: docker.com">
<p>출처: docker.com</p>
</figure><div class=toc>
<details open>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#error-log aria-label="Error Log">Error Log</a></li>
<li>
<a href=#%ec%99%9c-%ec%9d%b4%eb%9f%b0-%eb%ac%b8%ec%a0%9c%ea%b0%80-%eb%b0%9c%ec%83%9d%ed%95%98%eb%8a%94%ea%b0%80 aria-label="왜 이런 문제가 발생하는가?">왜 이런 문제가 발생하는가?</a></li>
<li>
<a href=#%ec%96%b4%eb%96%bb%ea%b2%8c-%ed%95%b4%ea%b2%b0%ed%95%98%eb%8a%94%ea%b0%80 aria-label="어떻게 해결하는가?">어떻게 해결하는가?</a><ul>
<li>
<a href=#%ed%95%b4%ea%b2%b0%eb%b2%95-1-docker-container%eb%a5%bc-%ec%8b%a4%ed%96%89%ed%95%a0-%eb%95%8c-%ed%8c%8c%eb%9d%bc%eb%a9%94%ed%84%b0-%ec%b6%94%ea%b0%80 aria-label="해결법 1. docker container를 실행할 때 파라메터 추가">해결법 1. docker container를 실행할 때 파라메터 추가</a></li>
<li>
<a href=#%ed%95%b4%ea%b2%b0%eb%b2%95-2-docker-%ec%84%a4%ec%a0%95-%eb%b3%80%ea%b2%bd aria-label="해결법 2. docker 설정 변경">해결법 2. docker 설정 변경</a></li></ul>
</li>
<li>
<a href=#%eb%a7%88%ec%b9%98%eb%a9%b0 aria-label=마치며..>마치며..</a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><p>이번 포스트는 제가 우분투 이미지를 사용해 개발 환경을 만들다 발생한 에러에 대해 얘기해보려 합니다.</p>
<h2 id=error-log>Error Log<a hidden class=anchor aria-hidden=true href=#error-log>#</a></h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Could not resolve <span style=color:#e6db74>&#39;archive.ubuntu.com&#39;</span>
</code></pre></div><p>dns에서 <code>archive.ubuntu.com</code>을 찾지 못했을 때 발생하는 에러이며 CentOS라던지 다른 리눅스의 패키지 매니저를 사용할 때 저 에러와 비슷한 에러를 보셨을 때 해결할 수 있는 방법을 얘기해보려 합니다.</p>
<h2 id=왜-이런-문제가-발생하는가>왜 이런 문제가 발생하는가?<a hidden class=anchor aria-hidden=true href=#왜-이런-문제가-발생하는가>#</a></h2>
<p>이 에러는 <code>/etc/resolve.conf</code>에 정의된 DNS 서버를 찾지 못했을 때 발생하는 에러입니다.</p>
<h2 id=어떻게-해결하는가>어떻게 해결하는가?<a hidden class=anchor aria-hidden=true href=#어떻게-해결하는가>#</a></h2>
<h3 id=해결법-1-docker-container를-실행할-때-파라메터-추가>해결법 1. docker container를 실행할 때 파라메터 추가<a hidden class=anchor aria-hidden=true href=#해결법-1-docker-container를-실행할-때-파라메터-추가>#</a></h3>
<p>이 방법은 해당 컨테이너에 한해서만 dns 설정을 변경하고 싶을 때 사용할 수 있는 방법입니다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker run ... --dns 8.8.8.8
</code></pre></div><h3 id=해결법-2-docker-설정-변경>해결법 2. docker 설정 변경<a hidden class=anchor aria-hidden=true href=#해결법-2-docker-설정-변경>#</a></h3>
<p>이 방법은 docker의 모든 컨테이너에 영향을 주는 설정이므로 신중히 생각해보시고 적용하셔야 합니다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># /etc/default/docker 파일에 아래 내용 삽입</span>
DOCKER_OPTS<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;--dns 8.8.8.8 --dns 8.8.4.4&#34;</span>
</code></pre></div><p>수정 후에는 반드시 docker service를 재시작 해주셔야 적용 됩니다.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>service docker restart
</code></pre></div><h2 id=마치며>마치며..<a hidden class=anchor aria-hidden=true href=#마치며>#</a></h2>
<p>대부분의 서비스에서는 <code>8.8.8.8</code>(google dns)로 설정해 에러를 해결합니다만 최근에 cloudflare가 <code>1.1.1.1</code>의 주소로 국내에 dns서버를 오픈했습니다. 때문에 싱가포르에 서버를 두고 있는 google dns보다 30ms정도 더 빠르다고 합니다. 참고하시어 설정하시면 좋을거 같습니다.</p>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://blog.realsangil.net/tags/docker/>docker</a></li>
<li><a href=https://blog.realsangil.net/tags/dns/>dns</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://blog.realsangil.net/posts/2018-08-04-letsencrypt-wildcard-certification/>
<span class=title>« Prev Page</span>
<br>
<span>Let's Encrypt 와일드카드 인증서 발급해보기</span>
</a>
<a class=next href=https://blog.realsangil.net/posts/2018-03-13-go-init-function/>
<span class=title>Next Page »</span>
<br>
<span>Go의 init 함수 간단 소개!!</span>
</a>
</nav>
</footer><script src=https://utteranc.es/client.js repo=realsangil/realsangil.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://blog.realsangil.net>Realsangil</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>